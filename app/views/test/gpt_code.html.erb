<select id="languageSelector">
    <option value="ruby">Ruby</option>
    <option value="html_ruby">Rails(html.erb)</option>
    <option value="java">Java</option>
    <option value="javascript">JavaScript</option>
    <option value="typescript">TypeScript</option>
    <option value="jsx">React</option>
    <option value="python">Python</option>
    <option value="php">PHP</option>
</select>

<div id="editor" style="height: 200px; width: 100%;"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js" type="text/javascript" charset="utf-8" onload="aceLoaded()"></script>
<script>
  const editor = ace.edit("editor",{
    theme: "ace/theme/monokai",
    mode: "ace/mode/javascript",
    minLines: 2
  });
</script>
<script>
// Ace Editorの読み込みが完了したら呼ばれる関数
function aceLoaded() {
    // 初期化と設定を行う関数
    function initEditor(language) {
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/monokai");
        editor.session.setMode("ace/mode/" + language);
        editor.session.setUseSoftTabs(true);
        editor.session.setTabSize(2);
        return editor;
    }

    var languageSelector = document.getElementById('languageSelector');
    var editor = initEditor(languageSelector.value);

    // 言語選択の変更を監視
    languageSelector.addEventListener('change', function() {
        editor.session.setMode("ace/mode/" + this.value);
    });
    // Shift + Enterで回答を提出
    editor.commands.addCommand({
        name: "submitAnswer",
        bindKey: {win: "Shift-Enter", mac: "Shift-Enter"},
        exec: function(editor) {
            // ここに回答を提出するためのコードを実装
            // 例: Ankiの回答フィールドにエディタの内容をコピーする
        }
    });
}

// この関数は、ace.jsの読み込みが終わった後に自動的に呼ばれます。
</script>